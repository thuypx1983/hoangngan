;if(typeof window.CKEDITOR_BASEPATH==='undefined'){window.CKEDITOR_BASEPATH=Drupal.settings.ckeditor.editor_path}(function(e){Drupal.ckeditor=(typeof(CKEDITOR)!='undefined');Drupal.ckeditor_ver=!1;Drupal.ckeditorToggle=function(t,n,r){if(!CKEDITOR.env.isCompatible){return};for(i=0;i<t.length;i++){if(typeof(CKEDITOR.instances)!='undefined'&&typeof(CKEDITOR.instances[t[i]])!='undefined'){Drupal.ckeditorOff(t[i]);e('#switch_'+t[i]).text(r)}
else{Drupal.ckeditorOn(t[i]);e('#switch_'+t[i]).text(n)}}};Drupal.ckeditorInit=function(t){var n=Drupal.settings.ckeditor;e('#'+t).next('.grippie').css('display','none');e('#'+t).addClass('ckeditor-processed');var i=!1;n.input_formats[n.elements[t]].toolbar=eval(n.input_formats[n.elements[t]].toolbar);i=n.input_formats[n.elements[t]];var o=e('#toolbar, #admin-menu',Drupal.overlayChild?window.parent.document:document);i['on']={configLoaded:function(t){Drupal.ckeditor_ver=CKEDITOR.version.split('.')[0];if(Drupal.ckeditor_ver==3){t.editor.addCss(t.editor.config.extraCss)}
else{CKEDITOR.addCss(t.editor.config.extraCss)};t.editor.on('change',function(t){e(t.editor.element.$).trigger('change')});t.editor.on('blur',function(t){e(t.editor.element.$).trigger('blur')});t.editor.on('focus',function(t){e(t.editor.element.$).trigger('click')})},instanceReady:function(i){var o=e(i.editor.document.$.body);if(typeof(i.editor.dataProcessor.writer.setRules)!='undefined'){i.editor.dataProcessor.writer.setRules('p',{breakAfterOpen:!1});if(typeof(n.input_formats[n.elements[t]].custom_formatting)!='undefined'){var r=CKEDITOR.dtd;for(var a in CKEDITOR.tools.extend({},r.$block,r.$listItem,r.$tableContent)){i.editor.dataProcessor.writer.setRules(a,n.input_formats[n.elements[t]].custom_formatting)};i.editor.dataProcessor.writer.setRules('pre',{indent:n.input_formats[n.elements[t]].output_pre_indent})}};if(i.editor.config.bodyClass)o.addClass(i.editor.config.bodyClass);if(i.editor.config.bodyId)o.attr('id',i.editor.config.bodyId);if(typeof(Drupal.smileysAttach)!='undefined'&&typeof(i.editor.dataProcessor.writer)!='undefined')i.editor.dataProcessor.writer.indentationChars='    ';((i.editor.editable&&i.editor.editable())||i.editor.document.getBody()).on('keyup',function(){e(i.editor.element.$).trigger('keyup')});((i.editor.editable&&i.editor.editable())||i.editor.document.getBody()).on('keydown',function(){e(i.editor.element.$).trigger('keydown')})},focus:function(e){Drupal.ckeditorInstance=e.editor;Drupal.ckeditorActiveId=e.editor.name},afterCommandExec:function(e){if(e.data.name!='maximize'){return};if(e.data.command.state==CKEDITOR.TRISTATE_ON){o.hide()}
else{o.show()}}};if(typeof Drupal.settings.ckeditor.scayt_language!='undefined'){i['scayt_sLang']=Drupal.settings.ckeditor.scayt_language};if(typeof i['js_conf']!='undefined'){for(var r in i['js_conf']){i[r]=eval(i['js_conf'][r])}};if(i.width=='100%')i.width='';if(CKEDITOR.loadFullCore){CKEDITOR.on('loaded',function(){i=Drupal.ckeditorLoadPlugins(i);Drupal.ckeditorInstance=CKEDITOR.replace(t,i)});CKEDITOR.loadFullCore()}
else{i=Drupal.ckeditorLoadPlugins(i);Drupal.ckeditorInstance=CKEDITOR.replace(t,i)}};Drupal.ckeditorOn=function(t,i){i=typeof(i)!='undefined'?i:!0;if(typeof(t)=='undefined'||t.length==0||e('#'+t).length==0){return};if((typeof(Drupal.settings.ckeditor.load_timeout)=='undefined')&&(typeof(CKEDITOR.instances[t])!='undefined')){return};if(typeof(Drupal.settings.ckeditor.elements[t])=='undefined'){return};var n=Drupal.settings.ckeditor;if(!CKEDITOR.env.isCompatible){return};if(i&&(e('#'+t).val().length>0)&&typeof(n.input_formats[n.elements[t]])!='undefined'&&((n.input_formats[n.elements[t]]['ss']==1&&typeof(Drupal.settings.ckeditor.autostart)!='undefined'&&typeof(Drupal.settings.ckeditor.autostart[t])!='undefined')||n.input_formats[n.elements[t]]['ss']==2)){e.ajax({type:'POST',url:Drupal.settings.ckeditor.xss_url,async:!1,data:{text:e('#'+t).val(),input_format:n.textarea_default_format[t],token:Drupal.settings.ckeditor.ajaxToken},success:function(i){e('#'+t).val(i);Drupal.ckeditorInit(t)}})}
else{Drupal.ckeditorInit(t)}};Drupal.ckeditorOff=function(t){if(!CKEDITOR.instances||typeof(CKEDITOR.instances[t])=='undefined'){return};if(!CKEDITOR.env.isCompatible){return};if(Drupal.ckeditorInstance&&Drupal.ckeditorInstance.name==t)delete Drupal.ckeditorInstance;e('#'+t).val(CKEDITOR.instances[t].getData());CKEDITOR.instances[t].destroy(!0);e('#'+t).next('.grippie').css('display','block')};Drupal.ckeditorLoadPlugins=function(e){if(typeof(e.extraPlugins)=='undefined'){e.extraPlugins=''};if(typeof CKEDITOR.plugins!='undefined'){for(var t in e['loadPlugins']){e.extraPlugins+=(e.extraPlugins)?','+e['loadPlugins'][t]['name']:e['loadPlugins'][t]['name'];CKEDITOR.plugins.addExternal(e['loadPlugins'][t]['name'],e['loadPlugins'][t]['path'])}};return e};Drupal.ckeditorCompareVersion=function(e){var t=CKEDITOR.version;t=t.match(/(([\d]\.)+[\d]+)/i);e=e.match(/((\d+\.)+[\d]+)/i);t=t[0].split('.');e=e[0].split('.');for(var i in t){if(t[i]<e[i]){return!1}
else if(t[i]>e[i]){return!0}};return!0};Drupal.ckeditorInsertHtml=function(e){if(!Drupal.ckeditorInstance)return!1;if(Drupal.ckeditorInstance.mode=='wysiwyg'){Drupal.ckeditorInstance.insertHtml(e);return!0}
else{alert(Drupal.t('Content can only be inserted into CKEditor in the WYSIWYG mode.'));return!1}};if(typeof(Drupal.Ajax)!='undefined'&&typeof(Drupal.Ajax.plugins)!='undefined'){Drupal.Ajax.plugins.CKEditor=function(e,t){if(e==='submit'&&typeof(CKEDITOR.instances)!='undefined'){for(var i in CKEDITOR.instances)CKEDITOR.instances[i].updateElement()};return!0}};Drupal.ckeditorSubmitAjaxForm=function(){if(typeof(CKEDITOR.instances)!='undefined'&&typeof(CKEDITOR.instances['edit-body'])!='undefined'){Drupal.ckeditorOff('edit-body')}};function t(t){if(Drupal.behaviors.textarea&&Drupal.behaviors.textarea.attach){Drupal.behaviors.textarea.attach(t)};e(t).find('textarea.ckeditor-mod:not(.ckeditor-processed)').each(function(){var t=e(this).attr('id');if(CKEDITOR.instances&&typeof(CKEDITOR.instances[t])!='undefined'){Drupal.ckeditorOff(t)};if((typeof(Drupal.settings.ckeditor.autostart)!='undefined')&&(typeof(Drupal.settings.ckeditor.autostart[t])!='undefined')){Drupal.ckeditorOn(t)};if(typeof(Drupal.settings.ckeditor.input_formats[Drupal.settings.ckeditor.elements[t]])!='undefined'){e('.ckeditor_links').show()};var i=e('#'+t.substr(0,t.lastIndexOf('-'))+'-format--2');if(i&&i.not('.ckeditor-processed')){i.addClass('ckeditor-processed').change(function(){Drupal.settings.ckeditor.elements[t]=e(this).val();if(CKEDITOR.instances&&typeof(CKEDITOR.instances[t])!='undefined'){e('#'+t).val(CKEDITOR.instances[t].getData())};Drupal.ckeditorOff(t);if(typeof(Drupal.settings.ckeditor.input_formats[e(this).val()])!='undefined'){if(e('#'+t).hasClass('ckeditor-processed')){Drupal.ckeditorOn(t,!1)}
else{Drupal.ckeditorOn(t)};e('#switch_'+t).show()}
else{e('#switch_'+t).hide()}})}})};Drupal.behaviors.ckeditor={attach:function(e){if((typeof(CKEDITOR)=='undefined')&&Drupal.settings.ckeditor.editor_path.match(/^(http(s)?:)?\/\//i)){if(typeof(Drupal.settings.ckeditor.loadAttempts)=='undefined'){Drupal.settings.ckeditor.loadAttempts=50};if(Drupal.settings.ckeditor.loadAttempts>0){Drupal.settings.ckeditor.loadAttempts--;window.setTimeout(function(){Drupal.behaviors.ckeditor.attach(e)},300)};return};if((typeof(CKEDITOR)=='undefined')||!CKEDITOR.env.isCompatible){return};t(e)},detach:function(t,i,n){e(t).find('textarea.ckeditor-mod.ckeditor-processed').each(function(){var t=e(this).attr('id');if(CKEDITOR.instances[t])e('#'+t).val(CKEDITOR.instances[t].getData());if(n!='serialize'){Drupal.ckeditorOff(t);e(this).removeClass('ckeditor-processed')}})}};e(document).bind('CToolsDetachBehaviors',function(e,t){Drupal.behaviors.ckeditor.detach(t,{},'unload')})})(jQuery);var ckeditor_imceSendTo=function(e,t){var i=t.location.href.split('&');for(var n in i){if(i[n].match(/^CKEditorFuncNum=\d+$/)){i=i[n].split('=');break}};CKEDITOR.tools.callFunction(i[1],e.url);t.close()};